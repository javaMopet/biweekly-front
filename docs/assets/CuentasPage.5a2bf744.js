import{Q as G,a as L}from"./QBreadcrumbs.fcd8d044.js";import{b as J,Q as X,a as Y,C as O}from"./index.804869e1.js";import{l as Z,bK as W,N as ee,r as w,aF as te,c as B,as as ae,w as R,I as oe,t as g,ao as j,_ as ne,z as y,g as le,aa as ie,aI as se,af as re,C as ue,ag as p,aK as T,aj as a,ai as o,aq as i,u as E,ah as N,b5 as ce,b6 as de,E as z,b7 as P,aM as k,Q as me,ak as fe,am as be,aN as q,ap as ve,b2 as _e,b3 as ge}from"./index.20d4ad85.js";import{b as we,a as D,Q as U}from"./QList.5cb48b53.js";import{Q as F}from"./QItemLabel.be9194dc.js";import{a as he}from"./QBtnToggle.bfaab28d.js";import{Q as Ce}from"./QSpinnerBall.7159b7fa.js";import{Q as pe}from"./QInnerLoading.1824423b.js";import{Q as ye}from"./QImg.df9e647c.js";import{Q as K}from"./QTooltip.a2dbcdc4.js";import{u as xe,b as Qe,a as Se}from"./useCuentasCrud.5ef3cef5.js";import{_ as Be}from"./FormRegistroCuenta.fba7adc4.js";import{u as ke,a as qe}from"./useNotificacion.79136029.js";import{u as De}from"./useFormato.c7e3ed92.js";import"./format.9422eb17.js";import"./index.27a31e1c.js";import"./DialogTitle.a45c2883.js";import"./printer.c268160e.js";import"./CuentaContableSelect.d4102a6d.js";const Ie=Object.keys(W),Ae=e=>Ie.reduce((u,s)=>{const m=e[s];return m!==void 0&&(u[s]=m),u},{});var Ve=Z({name:"QBtnDropdown",props:{...W,...ee,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:u,emit:s}){const{proxy:m}=le(),f=w(e.modelValue),r=w(null),b=te(),v=B(()=>{const t={"aria-expanded":f.value===!0?"true":"false","aria-haspopup":"true","aria-controls":b,"aria-label":e.toggleAriaLabel||m.$q.lang.label[f.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(t["aria-disabled"]="true"),t}),h=B(()=>"q-btn-dropdown__arrow"+(f.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),c=B(()=>ae(e)),d=B(()=>Ae(e));R(()=>e.modelValue,t=>{r.value!==null&&r.value[t?"show":"hide"]()}),R(()=>e.split,n);function x(t){f.value=!0,s("beforeShow",t)}function I(t){s("show",t),s("update:modelValue",!0)}function C(t){f.value=!1,s("beforeHide",t)}function A(t){s("hide",t),s("update:modelValue",!1)}function Q(t){s("click",t)}function V(t){ie(t),n(),s("click",t)}function $(t){r.value!==null&&r.value.toggle(t)}function S(t){r.value!==null&&r.value.show(t)}function n(t){r.value!==null&&r.value.hide(t)}return Object.assign(m,{show:S,hide:n,toggle:$}),oe(()=>{e.modelValue===!0&&S()}),()=>{const t=[g(j,{class:h.value,name:e.dropdownIcon||m.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&t.push(g(J,{ref:r,id:b,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:x,onShow:I,onBeforeHide:C,onHide:A},u.default)),e.split===!1?g(y,{class:"q-btn-dropdown q-btn-dropdown--simple",...d.value,...v.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:Q},{default:()=>ne(u.label,[]).concat(t),loading:u.loading}):g(he,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...c.value,glossy:e.glossy,stretch:e.stretch},()=>[g(y,{class:"q-btn-dropdown--current",...d.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:V},{default:u.label,loading:u.loading}),g(y,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...v.value,...c.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>t)])}}});const $e=e=>(_e("data-v-aa451e02"),e=e(),ge(),e),Ne={class:""},Pe={class:"row items-center q-ml-sm q-gutter-x-sm"},je={class:"q-pa-md q-gutter-sm"},Me={class:"column q-mx-md"},He={class:"row fit"},Le=$e(()=>i("div",{class:"page-title"},"Cuentas",-1)),Oe={class:"row inline items-center q-gutter-x-md"},Re={class:""},Te={class:"bg-accent-light"},Ee=["onClick"],ze={class:"col-2"},Ue=["onClick"],Fe={class:"row cuenta-card__title"},Ke={class:"row cuenta__subtitle"},We={key:0,class:"fit flex flex-left text-left non-selectable"},Ge={class:"row text-condensed text-blue-grey-4"},Je={class:"text-subtitle2 full-width",align:"right"},Xe={class:"row full-width items-center justify-between q-pt-sm cuenta-card__acciones"},Ye={class:"col",align:"right",style:{cursor:"normal"}},Ze={__name:"CuentasPage",setup(e){const u=ke(),s=qe(),m=De(),f=re(),r=xe(),b=Qe();b.onErrorCuentaDelete(n=>{s.mostrarNotificacionNegativa("No es posible eliminar esta cuenta, favor de verificar que no contenga movimientos",1600)});const v={id:null,nombre:null,tipoCuenta:{id:null},cuentaContable:null},h=w(),c=w(!1),d=w({...v}),x=w([]),I=[{name:"nombre",label:"Nombre",field:"nombre",sortable:!0,align:"left"},{name:"descripcion",label:"Descripci\xF3n",field:"descripcion",sortable:!0,align:"left"},{name:"cuenta_contable",label:"Cuenta Contable",field:n=>`${n.cuentaContable.id} - ${n.cuentaContable.nombre}`,sortable:!0,align:"left"},{name:"acciones",label:"Acciones",field:"action",sortable:!1,align:"center"}];ue(()=>{r.loadOrRefetchListaCuentas(),console.log("onMounted CuentasPage.vue",r.listaCuentas.length>0)});function C(n){console.log("tipo de cuenta",n),d.value={...v},d.value.tipoCuenta.id=n.toString(),c.value=!0}function A(n){d.value={...n.row},console.log("iniciar edicion el item",d.value),console.log("indice:",n.rowIndex),c.value=!0}function Q(n){x.value[n.rowIndex]=!0,f.push(`/cuentas/${n.row.id}`)}function V(n){u.dialog({title:"Confirmar",style:"width:500px",message:`Est\xE1 a punto de eliminar la cuenta "${n.row.nombre}" \xBFDesea continuar con la eliminaci\xF3n?`,ok:{push:!0,color:"positive",label:"Continuar"},cancel:{push:!0,color:"negative",flat:!0,label:"cancelar"},persistent:!0}).onOk(()=>{b.cuentaDelete({id:n.row.id})}).onCancel(()=>{}).onDismiss(()=>{})}b.onDoneCuentaDelete(({data:n})=>{const t=n.cuentaDelete.cuenta;console.log("itemDeleted",t),s.mostrarNotificacionPositiva(`La cuenta ${t.nombre} se elimin\xF3 correctamente`,1400)});function $(n){c.value=!1}function S(n){c.value=!1,d.value={...v}}return(n,t)=>(p(),T("div",Ne,[a(X,{class:"",dense:"",fit:""},{default:o(()=>[i("div",Pe,[i("div",je,[a(G,{class:"breadcrum-component","active-color":"primary",separator:">","separator-color":"primary"},{default:o(()=>[a(L,{label:"Home",icon:"home",to:"/"}),a(L,{label:"Cuentas",icon:"account_balance"})]),_:1})])]),a(Y)]),_:1}),i("div",Me,[i("div",He,[a(Se,{grid:"",style:{width:"100%"},dense:"",rows:E(r).listaCuentasAhorro,columns:I,"row-key":"id",filter:h.value,"rows-per-page-options":[0],"hide-pagination":""},{"top-left":o(()=>[Le]),"top-right":o(()=>[i("div",Oe,[i("div",Re,[a(Ve,{split:"",color:"primary-button",push:"",glossy:"","no-caps":"",label:"Nuevo",icon:"add_circle",onClick:t[2]||(t[2]=l=>C(1)),"text-color":"accent-light"},{default:o(()=>[a(we,{class:"bg-primary-light"},{default:o(()=>[z((p(),N(U,{clickable:"",onClick:t[0]||(t[0]=l=>C(1))},{default:o(()=>[a(D,{avatar:""},{default:o(()=>[a(P,{icon:"account_balance",color:"primary","text-color":"white"})]),_:1}),a(D,null,{default:o(()=>[a(F,null,{default:o(()=>[k("Cuenta de Ahorros")]),_:1})]),_:1})]),_:1})),[[O]]),z((p(),N(U,{clickable:"",onClick:t[1]||(t[1]=l=>C(2))},{default:o(()=>[a(D,{avatar:""},{default:o(()=>[a(P,{icon:"payments",color:"secondary","text-color":"white"})]),_:1}),a(D,null,{default:o(()=>[a(F,null,{default:o(()=>[k("Cuenta de Efectivo")]),_:1})]),_:1})]),_:1})),[[O]])]),_:1})]),_:1})]),i("div",Te,[a(me,{outlined:"",dense:"",debounce:"300",modelValue:h.value,"onUpdate:modelValue":t[3]||(t[3]=l=>h.value=l),placeholder:"Buscar"},{append:o(()=>[a(j,{name:"search"})]),_:1},8,["modelValue"])])])]),item:o(l=>[a(fe,{class:"cuenta-card text-primary q-ma-sm",bordered:""},{default:o(()=>[a(pe,{class:"card-loading",showing:x.value[l.rowIndex]},{default:o(()=>[a(Ce,{size:"70px",color:"white"})]),_:2},1032,["showing"]),a(be,null,{default:o(()=>{var M;return[i("div",{class:"row justify-around q-gutter-x-lg q-pb-md",onClick:_=>Q(l),style:{cursor:"pointer"}},[i("div",ze,[a(P,{size:"60px"},{default:o(()=>{var _,H;return[a(ye,{src:`/icons/${(H=(_=l.row.banco)==null?void 0:_.icono)!=null?H:"cash.png"}`,width:"50px",height:"50px"},null,8,["src"])]}),_:2},1024)]),i("div",{class:"col-8",onClick:_=>Q(l)},[i("div",Fe,q(l.row.nombre),1),i("div",Ke,[l.row.identificador!==""?(p(),T("div",We," **** **** **** "+q(l.row.identificador),1)):ve("",!0),a(K,null,{default:o(()=>[k(" Abrir movimientos ")]),_:1})]),i("div",Ge,q(l.row.cuentaContable.nombreCompleto),1)],8,Ue),i("div",Je,q(E(m).toCurrency((M=l.row.saldo)!=null?M:0)),1)],8,Ee),i("div",Xe,[i("div",Ye,[a(y,{flat:"",round:"",icon:"las la-edit",class:"button-edit",onClick:_=>A(l)},{default:o(()=>[a(K,null,{default:o(()=>[k(" Editar ")]),_:1})]),_:2},1032,["onClick"]),a(y,{flat:"",round:"",icon:"las la-trash-alt",class:"button-delete",onClick:_=>V(l)},null,8,["onClick"])])])]}),_:2},1024)]),_:2},1024)]),"body-cell-icono":o(l=>[a(j,{name:l.row.icono,size:"35px",color:"cyan"},null,8,["name"])]),_:1},8,["rows","filter"])]),(p(),N(de,{to:"#modal"},[a(ce,{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=l=>c.value=l),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:o(()=>[a(Be,{"edited-item":d.value,onCuentaSaved:$,onCuentaUpdated:S},null,8,["edited-item"])]),_:1},8,["modelValue"])]))])]))}};var ht=se(Ze,[["__scopeId","data-v-aa451e02"]]);export{ht as default};
