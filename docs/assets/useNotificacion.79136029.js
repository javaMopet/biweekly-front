import{l as P,r as F,au as q,B as E,C as I,I as A,t as B,_ as Q,g as R,av as V,$ as N,n as j,aw as $,ax as w,i as D,ay as K}from"./index.20d4ad85.js";var T=P({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(a,{slots:d,emit:c}){const v=R(),e=F(null);let n=0;const r=[];function m(t){const u=typeof t=="boolean"?t:a.noErrorFocus!==!0,l=++n,x=(o,i)=>{c("validation"+(o===!0?"Success":"Error"),i)},h=o=>{const i=o.validate();return typeof i.then=="function"?i.then(s=>({valid:s,comp:o}),s=>({valid:!1,comp:o,err:s})):Promise.resolve({valid:i,comp:o})};return(a.greedy===!0?Promise.all(r.map(h)).then(o=>o.filter(i=>i.valid!==!0)):r.reduce((o,i)=>o.then(()=>h(i).then(s=>{if(s.valid===!1)return Promise.reject(s)})),Promise.resolve()).catch(o=>[o])).then(o=>{if(o===void 0||o.length===0)return l===n&&x(!0),!0;if(l===n){const{comp:i,err:s}=o[0];if(s!==void 0&&console.error(s),x(!1,i),u===!0){const S=o.find(({comp:C})=>typeof C.focus=="function"&&V(C.$)===!1);S!==void 0&&S.comp.focus()}}return!1})}function y(){n++,r.forEach(t=>{typeof t.resetValidation=="function"&&t.resetValidation()})}function b(t){t!==void 0&&N(t);const u=n+1;m().then(l=>{u===n&&l===!0&&(a.onSubmit!==void 0?c("submit",t):t!==void 0&&t.target!==void 0&&typeof t.target.submit=="function"&&t.target.submit())})}function p(t){t!==void 0&&N(t),c("reset"),j(()=>{y(),a.autofocus===!0&&a.noResetFocus!==!0&&f()})}function f(){$(()=>{if(e.value===null)return;const t=e.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||e.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||e.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(e.value.querySelectorAll("[tabindex]"),u=>u.tabIndex>-1);t!=null&&t.focus({preventScroll:!0})})}q(w,{bindComponent(t){r.push(t)},unbindComponent(t){const u=r.indexOf(t);u>-1&&r.splice(u,1)}});let g=!1;return E(()=>{g=!0}),I(()=>{g===!0&&a.autofocus===!0&&f()}),A(()=>{a.autofocus===!0&&f()}),Object.assign(v.proxy,{validate:m,resetValidation:y,submit:b,reset:p,focus:f,getValidationComponents:()=>r}),()=>B("form",{class:"q-form",ref:e,onSubmit:b,onReset:p},Q(d.default))}});function O(){return D(K)}function _(){const a=O();return{mostrarNotificacionPositiva:(e,n)=>{a.notify({position:"center",type:"positive",message:e,timeout:n,color:"positive",textColor:"white",classes:"glossy"})},mostrarNotificacionNegativa:(e,n,r)=>{a.notify({position:r,type:"negative",message:e,timeout:n})},mostrarNotificacionInformativa:(e,n)=>{a.notify({position:"bottom",type:"info",message:e,timeout:n,color:"info"})}}}export{T as Q,_ as a,O as u};
