import{Q as Nt,a as $e}from"./QBreadcrumbs.fcd8d044.js";import{C as Ve,Q as Re,a as We}from"./index.804869e1.js";import{t as Pt,l as Dt,r as v,I as ye,c as f,ag as V,aK as X,aj as t,ai as s,aM as D,aN as m,aq as e,bv as kt,Q as Ee,ap as K,E as we,z as I,am as Y,f as ae,P as Qt,k as Me,ah as W,T as Xe,ao as he,u as S,aG as L,ak as ie,aI as Ze,aO as et,aP as Ut,b4 as fe,b8 as tt,b2 as at,b3 as ot,bQ as Lt,af as zt,b5 as Fe,b6 as Gt,aH as Ht,b7 as Bt,bR as Jt}from"./index.20d4ad85.js";import{Q as Ae}from"./QImg.df9e647c.js";import{Q as Kt}from"./QItemLabel.be9194dc.js";import{Q as Yt}from"./QSlideTransition.55653597.js";import{_ as st,b as be,a as ge}from"./CategoriaSelect.674cba46.js";import{P as lt,d as Wt,a as O}from"./FormRegistroCategoria.298f8369.js";import{d as Xt,a as qe,b as Zt,S as Be,e as ea}from"./useCuentasCrud.5ef3cef5.js";import{Q as ta,r as aa,u as Je,_ as oa,b as sa}from"./PeriodoSelect.99389d50.js";import{D as k,u as oe}from"./useFormato.c7e3ed92.js";import{a as se,Q as rt,u as la}from"./useNotificacion.79136029.js";import{u as nt,L as it}from"./useRegistrosTarjetaCrud.e130dd85.js";import{D as Ne}from"./DialogTitle.a45c2883.js";import{u as Oe,r as Ke}from"./index.27a31e1c.js";import{b as ct,Q as dt,a as Ye}from"./QList.5cb48b53.js";import{Q as ra}from"./QInnerLoading.1824423b.js";import"./format.9422eb17.js";import"./QTooltip.a2dbcdc4.js";import"./QBtnToggle.bfaab28d.js";import"./TouchPan.b5696d76.js";import"./QResizeObserver.86d26826.js";import"./FormRegistroCuenta.fba7adc4.js";import"./CuentaContableSelect.d4102a6d.js";import"./printer.c268160e.js";const na=Pt("div",{class:"q-space"});var ia=Dt({name:"QSpace",setup(){return()=>na}});const ca={class:"my-card",style:{width:"450px","min-width":"450px"}},da={class:"main-content q-pt-md",style:{border:"0px solid red"}},ua={style:{border:"0px solid red"}},ma={class:"row inline q-gutter-x-xs"},_a={class:"col column"},pa={class:"col column"},va={class:"row"},fa={key:0,class:"row q-gutter-x-sm items-center justify-center"},ga=e("div",{class:"input-label"},"N\xFAmero de meses:",-1),ha={class:""},ba={class:""},ya={class:"column q-py-md"},wa={align:"right",class:"q-gutter-x-sm"},Ca={__name:"FormRegistroMovimientoTarjeta",props:{registroEditedItem:{type:Object,required:!1,default:()=>({id:null})},cuentaId:{type:Number,required:!0},fecha:{type:String,required:!1}},emits:["registroCreated","registroUpdated"],setup(R,{emit:Q}){const U=oe(),p=se(),w=nt();se(),v("2");const A=v({fecha:"10/05/2023"});ye(()=>{if(u.value.id)console.log("is edicion");else{const n=k.now(),c=U.formatoFecha(n);console.log("fecha",c),A.value={fecha:c,concepto:"",importe:"",categoria:null,isMsi:!1,numero_msi:3},u.value.fecha=E.fecha?U.convertDateFromIsoToInput(E.fecha):U.formatoFecha(new Date)}});const E=R,q=Q;function M(){console.log("onsubmit",u.value);const n=u.value.isMsi,c=n?parseInt(u.value.numeroMsi):0,r=parseFloat(u.value.importe)*-1||0;if(console.log("importe",r),r!==0){const C=r>=0?"A":"C",b={estadoRegistroTarjetaId:1,cuentaId:E.cuentaId,tipoAfectacion:C,categoriaId:parseInt(u.value.categoria.id),importe:r,fecha:U.convertDateFromInputToIso(u.value.fecha),concepto:u.value.concepto,isMsi:n,numeroMsi:c};console.log("item guardando...",b),u.value.id?w.registroTarjetaUpdate({id:u.value.id,input:b}):w.createRegistroTarjeta({input:b})}else p.mostrarNotificacionNegativa("Ingresar un importe mayo a cero.",200)}w.onDoneRegistroTarjetaCreate(({data:n})=>{var r;const c=(r=n==null?void 0:n.registroTarjetaCreate)==null?void 0:r.registroTarjeta;console.log("item guardado",c),q("registroCreated",c)}),w.onErrorRegistroTarjetaCreate(n=>{console.trace(n)}),w.onDoneRegistroTarjetaUpdate(({data:n})=>{var r;const c=(r=n==null?void 0:n.registroTarjetaUpdate)==null?void 0:r.registroTarjeta;console.log("item guardado",c),q("registroUpdated",c)});const h=f({get(){return"Nuevo Registro"}}),$=f({get(){return"Guardar"}}),u=f({get(){var n;return(n=E.registroEditedItem)!=null&&n.id?E.registroEditedItem:A.value},set(n){A.value=n}}),N=f({get(){var n;return!!((n=E.registroEditedItem)!=null&&n.id)}});function j(n){return k.fromFormat(n,"dd/MM/yyyy").isValid}function F(n){!N.value&&!!n&&(console.log("Nuevo registros tarjeta categoria:",n),u.value.importe=parseFloat(n.importeDefault)===0?"":n.importeDefault.toString(),u.value.concepto=n.descripcion)}return(n,c)=>(V(),X("div",ca,[t(Ne,null,{default:s(()=>[D(m(h.value),1)]),_:1}),e("div",da,[t(rt,{onSubmit:M,class:"q-gutter-y-md q-mt-xs form-componente__body"},{default:s(()=>[e("div",ua,[t(st,{modelValue:u.value.categoria,"onUpdate:modelValue":[c[0]||(c[0]=r=>u.value.categoria=r),F],rules:[r=>!!r||"Selecciona una categor\xEDa"],autofocus:""},null,8,["modelValue","rules"]),e("div",ma,[e("div",_a,[t(be,{modelValue:u.value.fecha,"onUpdate:modelValue":c[1]||(c[1]=r=>u.value.fecha=r),rules:[r=>!!r&&j(r)||"Favor de ingresar una fecha correcta"]},null,8,["modelValue","rules"])]),e("div",pa,[t(lt,{label:"Importe",modelValue:u.value.importe,"onUpdate:modelValue":c[2]||(c[2]=r=>u.value.importe=r),rules:[r=>!!r||"Favor de ingresar un importe v\xE1lido"]},null,8,["modelValue","rules"])])]),e("div",va,[t(kt,{color:"secondary","right-label":"",modelValue:u.value.isMsi,"onUpdate:modelValue":c[3]||(c[3]=r=>u.value.isMsi=r),label:"Meses sin Intereses"},null,8,["modelValue"])]),u.value.isMsi?(V(),X("div",fa,[ga,e("div",ha,[t(Ee,{modelValue:u.value.numeroMsi,"onUpdate:modelValue":c[4]||(c[4]=r=>u.value.numeroMsi=r),type:"number",outlined:"",dense:"",style:{width:"90px"},"lazy-rules":"",rules:[r=>!!r&&r>1||"Requerido"]},null,8,["modelValue","rules"])])])):K("",!0),e("div",ba,[t(Ee,{color:"secondary",modelValue:u.value.concepto,"onUpdate:modelValue":c[5]||(c[5]=r=>u.value.concepto=r),type:"textarea",label:"Observaciones",rows:"2",outlined:"",dense:""},null,8,["modelValue"])]),e("div",ya,[e("div",wa,[we(t(I,{label:"Cancelar",flat:"",class:"q-ml-sm"},null,512),[[Ve]]),t(I,{label:$.value,type:"submit",color:"primary-button"},null,8,["label"])])])])]),_:1})]),t(Y)]))}},xa={key:0,class:"row bg-pink-1"},Ia={class:"column"},ja={class:"row q-gutter-x-md q-pl-sm q-pt-sm"},Sa=e("span",{class:"text-caption text-dark"},"No se ha realizado el cierre del periodo anterior:",-1),Ta={class:"row q-mt-lg"},$a={class:"col column q-mr-sm"},Fa=e("div",{class:"row input-label"},"Fecha de pago:",-1),Ra={class:"col column q-ml-sm"},Ea=e("div",{class:"row input-label"},"Saldo del periodo:",-1),Aa={class:"column"},qa=e("div",{class:"row input-label"},"Cuenta de egreso:",-1),Oa={align:"right"},Va={__name:"PagosTarjeta",props:{cuenta:{type:Object,required:!0},fecha_inicio:{type:String,required:!0},fecha_fin:{type:String,required:!0},saldoPeriodoAnterior:{type:Number,required:!0},sumaMovimientos:{type:Number,required:!0}},emits:["itemsSaved"],setup(R,{emit:Q}){const U=se(),p=oe(),w=ae({fetchPolicy:"no-cache"}),{onError:A,onResult:E,load:q,refetch:M}=Oe(it),h=v({fecha:"",cuenta_egreso:null,saldo_periodo:""}),$=R,u=Q;ye(()=>{h.value.saldo_periodo=$.sumaMovimientos.toString(),h.value.fecha=k.now().toFormat("dd/MM/yyyy")});function N(){q(null,{cuentaId:$.cuenta.id,fechaInicio:$.fecha_inicio,fechaFin:$.fecha_fin,isMsi:!1,estadoRegistroTarjetaId:1},w)}E(({data:F})=>{var b;const n=(b=F==null?void 0:F.listaRegistrosTarjeta)!=null?b:[],c=p.convertDateFromInputToIso(h.value.fecha),r=Qt.getItem("user").id;console.dir(r);var C=[];n.forEach(g=>{const le={estado_registro_id:2,tipo_afectacion:g.tipoAfectacion,cuenta_id:h.value.cuenta_egreso.id,categoria_id:g.categoriaId,importe:parseFloat(g.importe),fecha:c,observaciones:g.concepto,registro_id:g.id,user_id:r};C.push(le)}),console.table(C),Me.post("/registros_tarjeta/create_pago",{lista_registros:C,fecha_fin:$.fecha_fin,cuenta_id:$.cuenta.id}).then(g=>{console.log("guardado correctamente"),console.log("response",g),U.mostrarNotificacionPositiva("Los registros han sido guardados correctamente.",1200),u("itemsSaved")}).catch(function(g){console.log(g.response.data),console.log(g.response.status),console.log(g.response.data.exception)})}),A(F=>{console.error(F)});const j=f({get(){return $.saldoPeriodoAnterior>0||h.value.saldo_periodo<=0}});return(F,n)=>(V(),W(ie,{class:"my-card",style:{width:"500px"}},{default:s(()=>[t(Ne,null,{default:s(()=>[D(m(R.cuenta.nombre),1)]),_:1}),t(Y,null,{default:s(()=>[t(rt,{onSubmit:N,class:"q-px-lg"},{default:s(()=>[t(Xe,{name:"fade"},{default:s(()=>[j.value?(V(),X("div",xa,[e("div",Ia,[e("div",ja,[t(he,{name:"warning",size:"1.5rem",color:"negative"}),Sa]),t(ct,{dense:""},{default:s(()=>[t(dt,{"inset-level":.5,dense:""},{default:s(()=>[t(Ye,{avatar:"",dense:"",style:{"min-width":"25px !important",width:"25px !important"}},{default:s(()=>[t(he,{color:"primary",name:"arrow_right"})]),_:1}),t(Ye,{class:"text-subtitle2"},{default:s(()=>[D("Saldo pendiente por un monto de "+m(S(p).toCurrency($.saldoPeriodoAnterior)),1)]),_:1})]),_:1})]),_:1})])])):K("",!0)]),_:1}),j.value?(V(),W(L,{key:0,spaced:"",horizontal:""})):K("",!0),e("div",Ta,[e("div",$a,[Fa,t(be,{modelValue:h.value.fecha,"onUpdate:modelValue":n[0]||(n[0]=c=>h.value.fecha=c),label:"Introduce una fecha v\xE1lida",rules:[c=>!!c||"Favor de ingresar la fecha"]},null,8,["modelValue","rules"])]),e("div",Ra,[Ea,t(lt,{modelValue:h.value.saldo_periodo,"onUpdate:modelValue":n[1]||(n[1]=c=>h.value.saldo_periodo=c),readonly:!0,rules:[c=>!!c&&c!=="0"&&c!=="$0.00"||"Favor de ingresar un valor mayor a cero"]},null,8,["modelValue","rules"])])]),e("div",Aa,[qa,t(Wt,{modelValue:h.value.cuenta_egreso,"onUpdate:modelValue":n[2]||(n[2]=c=>h.value.cuenta_egreso=c),rules:[c=>!!c||"Favor de ingresar la cuenta de egreso"]},null,8,["modelValue","rules"])]),e("div",Oa,[we(t(I,{label:"Cancelar",color:"primary",flat:"",class:"q-ml-sm"},null,512),[[Ve]]),t(I,{label:"Pagar",type:"submit",color:"primary-button",disable:j.value},null,8,["disable"])])]),_:1})]),_:1})]),_:1}))}};const Z=R=>(at("data-v-67c05b7c"),R=R(),ot(),R),Ma={class:"row q-pr-lg justify-between"},Na={class:"column"},Pa=Z(()=>e("div",{class:"load__file-text text-condensed"}," Selecciona un archivo en formato Excel: ",-1)),Da={class:"row items-center q-gutter-x-md"},ka={class:"column"},Qa=Z(()=>e("span",{class:"form-input__label"}," Desde:",-1)),Ua={class:"column"},La=Z(()=>e("span",{class:"form-input__label"},"Hasta:",-1)),za={key:0,class:"errors-message bg-pink-1"},Ga={class:"row"},Ha={class:"col-1"},Ba={class:"row justify-center items-start q-pt-md",style:{height:"100%"}},Ja={class:"col-10"},Ka={class:"q-py-sm"},Ya=Z(()=>e("div",{class:"row items-center q-gutter-x-lg",style:{border:"0px solid red"}},[e("span",{class:"errors-message__title"},"El formulario contiene los siguientes errores:")],-1)),Wa={class:"col"},Xa={class:"column items-end"},Za={class:"row justify-between items-center full-width text-accent"},eo={class:"col-9 q-pl-xl"},to={style:{border:"0px solid red"}},ao=Z(()=>e("td",null,"Total cargos:",-1)),oo={class:"summary__value"},so=Z(()=>e("td",null,"Total abonos:",-1)),lo={class:"summary__value"},ro=Z(()=>e("td",null,"Importe Total:",-1)),no={class:"summary__value"},io={class:"col-2"},co={class:"row justify-center"},uo={__name:"ImportarRegistrosTarjeta",props:{cuenta:{type:Object,required:!0,default:()=>({})},fecha_desde:{type:String,required:!0,default:()=>null},fecha_hasta:{type:String,required:!0,default:()=>null}},emits:["itemsSaved"],setup(R,{emit:Q}){const U=v(null),p=v([]),w=v([]),A=v(),E=v("01/01/1900"),q=v("01/01/1900"),M=v([]),h=v(!1),$=oe(),u=se(),{toCurrency:N}=oe(),j=R;ye(()=>{let _=$.formatoFechaFromISO(j.fecha_desde),i=$.formatoFechaFromISO(j.fecha_hasta);console.log("desde",_),E.value=_,q.value=i});const F=Q,n=new Map;async function c(_){try{const i=_.target.files;if(!i||i.length==0)return;const o=aa(await i[0].arrayBuffer());switch(n.set("Ene","01"),n.set("Feb","02"),n.set("Mar","03"),n.set("Abr","04"),n.set("May","05"),n.set("Jun","06"),n.set("Jul","07"),n.set("Ago","08"),n.set("Sep","09"),n.set("Oct","10"),n.set("Nov","11"),n.set("Dic","12"),j.cuenta.banco.id.toString()){case"1":r(o);break;case"2":C(o);break;default:break}}catch(i){console.log(i)}}function r(_){const i=Je.sheet_to_json(_.Sheets[_.SheetNames[0]],{header:["FECHA","CONSECUTIVO","CONCEPTO","IMPORTE"],skipHeader:!0,raw:!1});A.value=i.filter(o=>!!o.FECHA).map(o=>({fecha:o.FECHA.replace(o.FECHA.substring(3,6),n.get(o.FECHA.substring(3,6))),consecutivo:o.CONSECUTIVO,concepto:o.CONCEPTO,importe:o.IMPORTE})),A.value.forEach((o,y)=>{const P=parseFloat(o.importe);o.cargo=P>0?P:0,o.abono=P<0?P:0}),b(A.value)}function C(_){const i=Je.sheet_to_json(_.Sheets[_.SheetNames[0]],{header:["FECHA","DESCRIPCION","CARGO","ABONO","SALDO"],skipHeader:!0,raw:!1});A.value=i.map((o,y)=>{var P,de,ue,me,_e,pe;return{fecha:o.FECHA,consecutivo:y,concepto:o.DESCRIPCION,cargo:(de=(P=o.CARGO)==null?void 0:P.replace(",",""))!=null?de:0,abono:(me=(ue=o.ABONO)==null?void 0:ue.replace(",",""))!=null?me:0,saldo:(pe=(_e=o.SALDO)==null?void 0:_e.replace(",",""))!=null?pe:0}}),b(A.value)}function b(_){A.value.forEach((i,o)=>{const y=k.fromFormat(i.fecha.toString(),"dd/MM/yyyy");if(y.isValid){const P={id:o,fecha:y.toISODate(),consecutivo:i.consecutivo,cargo:parseFloat(i.cargo),abono:parseFloat(i.abono),concepto:i.concepto,tipoAfectacion:i.cargo!==0?"C":"A",clase:i.abono!==0?"registro-abono":"",saved:!1};w.value.push(P)}})}const g=f({get(){const _=k.fromFormat(E.value,"dd/MM/yyyy"),i=k.fromFormat(q.value,"dd/MM/yyyy");return w.value.filter(o=>{const y=k.fromISO(o.fecha);return y>=_&&y<=i})}}),le=f({get(){return M.value.length>0}}),ce=f({get(){return g.value.reduce((_,i)=>_+parseFloat(i.cargo),0)}}),B=f({get(){return g.value.reduce((_,i)=>_+parseFloat(i.abono),0)}}),G=f({get(){return g.value.reduce((_,i)=>_+parseFloat(i.cargo)+parseFloat(i.abono),0)}});function z(){if(H())setTimeout(()=>{M.value=[]},6e3);else{var i=[];g.value.forEach(o=>{const y=o.tipoAfectacion==="C"?o.cargo*-1:o.abono,P={estado_registro_tarjeta_id:1,tipo_afectacion:o.tipoAfectacion,cuenta_id:j.cuenta.id,categoria_id:o.categoria.id,importe:y,fecha:o.fecha,concepto:o.concepto};i.push(P)}),h.value=!0,Me.post("/create_multiple_registros_tarjeta",{lista_registros_tarjeta:i}).then(o=>{console.log("guardado correctamente"),console.log("response",o);const y=o.data.retorno[0].cuenta_id;console.log("cuenta",y),h.value=!1,F("itemsSaved",y)}).catch(o=>{h.value=!1,console.error(o.response.data.exception),u.mostrarNotificacionNegativa("No fue posible posible guardar los registro, revisar consola",900)})}}function H(){return M.value=[],g.value.length<=0?M.value.push({id:1,numeroLinea:void 0,message:"Favor de ingresar los datos que desea guardar."}):(console.table(g.value),g.value.forEach((_,i)=>{_.categoria||M.value.push({id:i,numeroLinea:_.id,message:"Favor de ingresar la categoria."})})),M.value.length>0}function Ce(){console.log("eliminar seleccionados",p.value),p.value.forEach(_=>{var i=w.value.indexOf(_);i!==-1&&w.value.splice(i,1)}),p.value.length=0}function xe(_){const i=_.row.id;console.log(i);const o=w.value.findIndex(y=>y.id==i);w.value.splice(o,1)}function Ie(){w.value.length=0}const je=f({get(){return p.value.length>0}}),ee=[{name:"consecutivo",label:"No.",field:"consecutivo",sortable:!0,align:"left",filter:!0,style:"width:55px",headerStyle:"width:55px"},{name:"fecha",label:"Fecha",field:"fecha",sortable:!0,align:"center",filter:!1,style:"width:95px;min-width: 95px;max-width: 95px",headerStyle:"width: 95px;min-width: 95px;max-width: 95px"},{name:"concepto",label:"Concepto",field:"concepto",sortable:!0,align:"left",filter:!0},{name:"cargo",label:"Cargo",field:"cargo",align:"right",style:"width:100px; min-width: 100px; max-width: 100px",headerStyle:"width:100px; min-width: 100px; max-width: 100px"},{name:"abono",label:"Abono",field:"abono",align:"right",style:"width:100px; min-width: 100px; max-width: 100px",headerStyle:"width:100px; min-width: 100px; max-width: 100px"},{name:"categoria",label:"Categoria",field:"categoria",sortable:!1,filter:!1,align:"left",style:"width:400px;max-width:400px",headerStyle:"width:400px;max-width:400px"},{name:"acciones",label:"",field:"action",sortable:!1,align:"center",style:"width:70px",headerStyle:"width:70px"}];function te(){M.value=[]}return(_,i)=>(V(),W(ie,{class:"my-card",dense:"",style:{width:"85%","min-width":"85%"}},{default:s(()=>[t(ra,{showing:h.value,label:"Saving... Please wait...","label-class":"text-teal","label-style":"font-size: 1.1em",style:{"z-index":"500"}},null,8,["showing"]),t(Ne,null,{default:s(()=>[D("Tarjeta de cr\xE9dito \xA0\xA0~ "+m(R.cuenta.nombre)+" ~",1)]),_:1}),t(Y,null,{default:s(()=>[t(Re,{class:"q-gutter-x-md"},{default:s(()=>[e("div",Ma,[e("div",Na,[Pa,t(ta,{modelValue:U.value,"onUpdate:modelValue":i[0]||(i[0]=o=>U.value=o),label:"Carga archivo Excel",accept:".xlsx,.xls",onInput:c,dense:"",style:{width:"450px"},"max-files":"1",outlined:"","label-color":"accent",clearable:"",onClear:Ie},{prepend:s(()=>[t(he,{color:"primary",name:"cloud_upload"})]),before:s(()=>[t(Ae,{src:"/icons/excel2.png",width:"24px"})]),_:1},8,["modelValue"])])]),t(L,{vertical:""}),e("div",Da,[e("div",ka,[Qa,t(be,{modelValue:E.value,"onUpdate:modelValue":i[1]||(i[1]=o=>E.value=o),lbl_field:"Fecha",opcional:!1,style:{width:"140px"}},null,8,["modelValue"])]),e("div",Ua,[La,t(be,{modelValue:q.value,"onUpdate:modelValue":i[2]||(i[2]=o=>q.value=o),lbl_field:"Fecha",opcional:!1,style:{width:"140px"}},null,8,["modelValue"])])]),t(We),t(I,{disable:!je.value,label:"Eliminar",onClick:Ce,outline:"",color:"negative"},null,8,["disable"])]),_:1}),t(Xe,{name:"fade"},{default:s(()=>[le.value?(V(),X("div",za,[e("div",Ga,[e("div",Ha,[e("div",Ba,[t(he,{name:"warning",size:"3rem",color:"negative"})])]),e("div",Ja,[e("div",Ka,[t(Xt,{query:"",rounded:"",color:"primary-light",class:"q-mt-sm",size:"8px",stripe:""}),Ya]),t(ct,{dense:""},{default:s(()=>[(V(!0),X(et,null,Ut(M.value,o=>(V(),W(dt,{dense:"",key:o.id,class:"errors-message__item"},{default:s(()=>[D(m(o.numeroLinea?`No. L\xEDnea ${o.numeroLinea}`:"")+" -> "+m(o.message),1)]),_:2},1024))),128))]),_:1})]),e("div",Wa,[e("div",Xa,[t(I,{color:"primary",icon:"close",dense:"",flat:"",class:"errors-message__closeBtn",onClick:te})])])])])):K("",!0)]),_:1})]),_:1}),t(Y,{style:{"max-height":"70vh",height:"60vh"},class:"scroll"},{default:s(()=>[t(qe,{rows:g.value,columns:ee,"rows-per-page-options":[0],"row-key":"consecutivo",separator:"cell",dense:"",selection:"multiple",selected:p.value,"onUpdate:selected":i[3]||(i[3]=o=>p.value=o),"table-header-class":"text-condensed bg-primary-light text-accent","no-data-label":"No existen datos disponibles","hide-pagination":"",class:"my-sticky-header-table"},{"body-cell-concepto":s(o=>[t(O,{props:o,class:fe(o.row.clase)},{default:s(()=>[D(m(o.row.concepto),1)]),_:2},1032,["props","class"])]),"body-cell-categoria":s(o=>[t(O,{props:o},{default:s(()=>[t(st,{modelValue:o.row.categoria,"onUpdate:modelValue":y=>o.row.categoria=y,"tipo-afectacion":o.row.tipo_afectacion,agregar:!0},null,8,["modelValue","onUpdate:modelValue","tipo-afectacion"])]),_:2},1032,["props"])]),"body-cell-cargo":s(o=>[t(O,{props:o},{default:s(()=>[e("span",{class:fe(o.row.clase)},m(S($).toCurrency(parseFloat(o.row.cargo))),3)]),_:2},1032,["props"])]),"body-cell-abono":s(o=>[t(O,{props:o},{default:s(()=>[e("span",{class:fe(o.row.clase)},m(S($).toCurrency(parseFloat(o.row.abono))),3)]),_:2},1032,["props"])]),"body-cell-acciones":s(o=>[t(O,{props:o},{default:s(()=>[t(I,{icon:"delete_sweep",size:"md",class:fe(o.row.clase),dense:"",onClick:y=>xe(o),flat:""},null,8,["class","onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","selected"])]),_:1}),t(tt,{class:"q-pa-xs"},{default:s(()=>[e("div",Za,[e("div",eo,[e("table",to,[e("tr",null,[ao,e("td",oo,m(S(N)(ce.value)),1)]),e("tr",null,[so,e("td",lo,m(S(N)(B.value)),1)]),e("tr",null,[ro,e("td",no,m(S(N)(G.value)),1)])])]),e("div",io,[e("div",co,[we(t(I,{flat:"",label:"Cancelar",class:"q-mr-lg"},null,512),[[Ve]]),t(I,{label:"Guardar",color:"primary-button",onClick:z})])])])]),_:1})]),_:1}))}};var mo=Ze(uo,[["__scopeId","data-v-67c05b7c"]]);const T=R=>(at("data-v-315a1abe"),R=R(),ot(),R),_o={class:"row items-center q-ml-sm q-gutter-x-sm"},po={class:"q-pa-md q-gutter-sm"},vo={class:"row inline fit items-center justify-between q-px-xl q-pt-md"},fo={class:"row items-center q-gutter-md"},go={class:"cuenta__title"},ho=T(()=>e("span",{class:"cuenta__title text-accent"},"Tarjeta de cr\xE9dito ",-1)),bo={class:"main-content"},yo={class:"cuenta-content"},wo={class:"row q-gutter-x-sm"},Co={key:1,class:"row text-condensed"},xo={class:"column items-center justify-center"},Io=T(()=>e("span",{class:"tarjeta__resumen-etiqueta"},"D\xEDa de corte:",-1)),jo={class:"resumen__valor"},So={class:"column items-center justify-center"},To=T(()=>e("span",{class:"tarjeta__resumen-etiqueta"},"Periodo:",-1)),$o={class:"resumen__valor"},Fo={class:"column items-center justify-center"},Ro=T(()=>e("span",{class:"tarjeta__resumen-etiqueta"},"Pago para no generar intereses:",-1)),Eo={class:"resumen__valor"},Ao={class:"column items-center justify-center"},qo=T(()=>e("span",{class:"tarjeta__resumen-etiqueta"},"Fecha l\xEDmite de pago:",-1)),Oo={class:"resumen__valor"},Vo={class:"column items-center justify-center"},Mo=T(()=>e("span",{class:"tarjeta__resumen-etiqueta"},"Saldo del periodo anterior:",-1)),No={class:"resumen__valor"},Po={class:"column items-center justify-center"},Do=T(()=>e("span",{class:"tarjeta__resumen-etiqueta"},"Saldo en tarjeta:",-1)),ko={class:"resumen__valor"},Qo={class:"col tarjeta-resumen__left q-gutter-y-xs"},Uo={class:"row"},Lo={class:"col column items-center"},zo=T(()=>e("span",{class:"tarjeta-resumen__etiqueta"}," D\xCDA DE CORTE ",-1)),Go={class:"tarjeta-resumen__valor"},Ho={class:""},Bo={class:"col column items-center"},Jo=T(()=>e("span",{class:"tarjeta-resumen__etiqueta"}," PERIODO DE FACTURACI\xD3N ",-1)),Ko={class:"tarjeta-resumen__valor"},Yo={class:"row"},Wo={class:"col column items-center"},Xo=T(()=>e("span",{class:"tarjeta-resumen__etiqueta"}," PAGO PARA NO GENERAR INTERESES ",-1)),Zo={class:"tarjeta-resumen__valor--importante"},es={class:"row"},ts={class:"col column items-center"},as=T(()=>e("span",{class:"tarjeta-resumen__etiqueta"}," FECHA LIMITE DE PAGO ",-1)),os={class:"tarjeta-resumen__valor--importante"},ss={class:"col tarjeta-resumen__right q-gutter-y-xs"},ls={class:"row"},rs={class:"col column items-center"},ns=T(()=>e("span",{class:"tarjeta-resumen__etiqueta"},"SALDO EN TARJETA ANTERIOR ",-1)),is={class:"tarjeta-resumen__valor"},cs={class:"row"},ds={class:"col column items-center"},us=T(()=>e("span",{class:"tarjeta-resumen__etiqueta"}," COMPRAS Y OTROS CARGOS ",-1)),ms={class:"tarjeta-resumen__valor"},_s={class:"row"},ps={class:"col column items-center"},vs=T(()=>e("span",{class:"tarjeta-resumen__etiqueta"}," SALDO EN TARJETA AL PERIODO ",-1)),fs={class:"tarjeta-resumen__valor"},gs={class:"row"},hs={class:"col column items-center"},bs=T(()=>e("span",{class:"tarjeta-resumen__etiqueta"}," SALDO EN TARJETA ",-1)),ys={class:"tarjeta-resumen__valor--importante"},ws=T(()=>e("div",{class:"column q-gutter-y-md"},[e("span",{class:"cuenta__data-subtitle"},"Movimientos a meses sin intereses")],-1)),Cs={class:""},xs={class:"row q-gutter-x-md"},Is=T(()=>e("div",{class:"table-title"},"Movimientos de la tarjeta",-1)),js={class:""},Ss={class:"row q-gutter-x-md"},Ts=T(()=>e("span",{class:"q-ml-sm"},"Importar",-1)),$s={__name:"TarjetaCreditoPage",setup(R){const Q=Lt(),U=zt(),p=oe(),w=se(),A=la(),E=Zt(),q=nt(),{mostrarNotificacionPositiva:M,mostrarNotificacionNegativa:h}=se(),{toCurrencyAbsoluteFormat:$}=oe(),u=v([]),N=v([]),j=v([{concepto:"mi concepto",fecha:"10/05/2013",importe:"500.20"}]),F=v(!1);v(!1);const n=v(!1),c=v(!1),r=v({}),C=v(0),b=v({}),g=v(0),le=v(0),ce=v(0),B=v(0),G=ae({cuentaId:Q.params.id,fechaInicio:"",fechaFin:"",isMsi:null,estadoRegistroTarjetaId:null}),z=v([]),H=v(!1);ye(()=>{const a=k.now();C.value=a.year;const l=a.month,d=Te.value.find(x=>x.id===l);b.value=d,Me.get(`/cuentas/${Q.params.id}`).then(x=>{var ne;r.value=(ne=x==null?void 0:x.data.data)!=null?ne:{},Ge(),te(),Ue()})});const Ce=ae({fetchPolicy:"no-cache"}),{load:xe,onResult:Ie,onError:je,refetch:ee}=Oe(it,G,Ce);function te(){xe()||ee()}Ie(({data:a})=>{a&&(N.value=a==null?void 0:a.listaRegistrosTarjeta.filter(l=>!l.isMsi),u.value=a==null?void 0:a.listaRegistrosTarjeta.filter(l=>l.isMsi),console.table(u.value))}),je(a=>{console.error("response",a)});const _=f({get(){return Math.abs(N.value.reduce((a,l)=>a+l.importe*-1,0))}}),i=f({get(){return N.value.filter(a=>a.tipoAfectacion==="C").reduce((a,l)=>a+l.importe*-1,0)}}),o=f({get(){return N.value.filter(a=>a.tipoAfectacion==="A").reduce((a,l)=>a+l.importe,0)}}),y=f({get(){return u.value.reduce((a,l)=>a+l.importe,0)}}),P=f({get(){return b.value.id-1<=0?C.value-1:C.value}}),de=f({get(){return b.value.id-1<=0?12:b.value.id-1}}),ue=f({get(){return C.value}}),me=f({get(){return r.value.dia_corte?r.value.dia_corte+1:28}}),_e=f({get(){return r.value.dia_corte?r.value.dia_corte:28}}),pe=f({get(){return b.value.id}}),ve=f({get(){let a=0,l=0;b.value.id-1<=0?(a=12,l=C.value-1):(a=b.value.id,l=C.value);const d=("0"+(r.value.dia_corte+1)).slice(-2);return`${l}-${("0"+a).slice(-2)}-${d}`}}),J=f({get(){const a=("0"+r.value.dia_corte).slice(-2);return`${C.value}-${("0"+b.value.id).slice(-2)}-${a}`}}),ut=f({get(){const a=k.fromISO(ve.value),l=k.fromISO(J.value),d=k.now();return console.log(a),console.log(l),a<=d&&d<=l?void 0:J.value}}),Pe=f({get(){const a=Te.value.find(l=>l.id===de.value);return a?`${me.value}/${a.nombre.substring(0,3)}/${P.value}`:""}}),De=f({get(){const a=Te.value.find(l=>l.id===pe.value);return a?`${_e.value}/${a.nombre.substring(0,3)}/${ue.value}`:""}}),ke=f({get(){return console.log(r.value.dias_gracia),k.fromISO(J.value).plus({days:r.value.dias_gracia})}}),Se=ae({fetchPolicy:"network-only"}),Qe=ae({cuentaId:Q.params.id,fechaFin:null,isDetalle:0}),{onResult:mt,onError:_t}=Ke(Be,Qe,Se);mt(({data:a})=>{console.log("resultado",a.saldoTarjetaCredito),ce.value=a.saldoTarjetaCredito}),_t(a=>{console.trace(a),h("Ocurri\xF3 un error al intentar obtener el saldo")});const{load:pt,onResult:vt,onError:ft}=Oe(Be);function Ue(){const a={cuentaId:Q.params.id,fechaFin:k.fromISO(G.fechaInicio).plus({days:-1}).toISODate(),isDetalle:0};pt(null,a,Se)}vt(({data:a})=>{console.log("resultado saldo anterior",a),B.value=a.saldoTarjetaCredito}),ft(a=>{console.trace(a),h("Ocurri\xF3 un error al intentar obtener el saldo anterior")});const Le=ae({cuentaId:Q.params.id,fechaFin:null,isDetalle:0}),{onResult:gt,onError:ht,refetch:re}=Ke(ea,Le,Se);gt(({data:a})=>{console.log("resultado saldo pagar",a.saldoPagarTarjetaCredito),g.value=a.saldoPagarTarjetaCredito}),ht(a=>{console.trace(a),h("Ocurri\xF3 un error al intentar obtener el saldo")}),q.onDoneRegistroTarjetaDelete(a=>{console.log("registro eliminado",a),te(),re(),bt("elimin\xF3")}),q.onDoneRegistrosTarjetaDelete(({data:a})=>{M("Los movimientos han sido eliminados.",2100),r.value.saldo=a.registrosTarjetaDelete.saldo,te(),re()}),q.onErrorRegistroTarjetaDelete(a=>{console.error(a)});function bt(a){w.mostrarNotificacionPositiva(`El registro se ${a} correctamente.`,1e3)}function ze(a){j.value=JSON.parse(JSON.stringify(a.row));const l=parseFloat(j.value.importe),d=j.value.tipoAfectacion==="C"?l*-1:l;j.value.importe=d.toString(),j.value.fecha=p.convertDateFromIsoToInput(j.value.fecha),F.value=!0}function yt(){if(console.table(z.value),z.value.length>0){const a=`Esta a punto de eliminar ${z.value.length} movimientos. \xBFDesea continuar?`;A.dialog({title:"Confirmar",style:"width:500px",message:a,ok:{push:!0,color:"positive",label:"Continuar"},cancel:{push:!0,color:"negative",flat:!0,label:"cancelar"},persistent:!0}).onOk(()=>{wt(z.value)}).onCancel(()=>{}).onDismiss(()=>{})}}function wt(a){console.log(a);const l=a.map(d=>d.id);console.log("eliminando",l.toString()),q.registrosTarjetaDelete({ids:l.toString()})}function Ct(a){console.log("eliminar");const l=a.row;A.dialog({title:"Confirmar",style:"width:500px",message:`\xBFEst\xE1 seguro que desea eliminar el registro con un monto de ${p.toCurrencyAbsoluteFormat(l.importe)}?`,ok:{push:!0,color:"positive",label:"Continuar"},cancel:{push:!0,color:"negative",flat:!0,label:"cancelar"},persistent:!0}).onOk(()=>{q.registroTarjetaDelete({id:l.id})}).onCancel(()=>{}).onDismiss(()=>{})}function Ge(){let a=b.value.id-1,l=C.value;a||(a=12,l=C.value-1);const d=("0"+(r.value.dia_corte+1)).slice(-2),x=("0"+r.value.dia_corte).slice(-2);G.fechaInicio=`${l}-${("0"+a).slice(-2)}-${d}`,console.log("fechaInicio",G.fechaInicio),G.fechaFin=`${C.value}-${("0"+b.value.id).slice(-2)}-${x}`,console.log("fechaFin",G.fechaFin)}function xt(){jt(),It(),Ue()}function It(){Qe.fechaFin=J.value,Le.fechaFin=J.value}function jt(){Ge()}function St(){n.value=!0}function He(){j.value=null,F.value=!0}function Tt(){console.log("registrando el pago"),c.value=!0}function $t(a){w.mostrarNotificacionPositiva("Se ha ingresado un nuevo registro.",1200),ee(),re(),F.value=!1}function Ft(){w.mostrarNotificacionPositiva("Se ha actualizado el registro correctamente.",1200),ee(),re(),F.value=!1}function Rt(a){n.value=!1,E.cuentaSaldoUpdate({cuentaId:a}),w.mostrarNotificacionPositiva("Los movimientos fueron guardados correctamente.",900),re(),ee()}E.onDoneCuentaSaldoUpdate(({data:a})=>{r.value.saldo=a.cuentaSaldoUpdate.cuenta.saldo});function Et(){c.value=!1,te()}function At(a,l,d){return`N\xFAmero de movimientos en el periodo: ${d}`}function qt(a){console.log("guardando el concepto"),console.dir(a.row)}const Te=v([{id:1,nombre:"Enero"},{id:2,nombre:"Febrero"},{id:3,nombre:"Marzo"},{id:4,nombre:"Abril"},{id:5,nombre:"Mayo"},{id:6,nombre:"Junio"},{id:7,nombre:"Julio"},{id:8,nombre:"Agosto"},{id:9,nombre:"Septiembre"},{id:10,nombre:"Octubre"},{id:11,nombre:"Noviembre"},{id:12,nombre:"Diciembre"}]);v([2021,2022,2023]);const Ot=[{name:"fecha",label:"Fecha",field:"fecha",sortable:!0,align:"left",format:(a,l)=>p.formatoFechaFromISO(a),style:"width: 10%"},{name:"concepto",label:"Concepto",field:a=>a.concepto,sortable:!0,align:"left",style:"width: 40%"},{name:"cargo",label:"Cargo",field:"cargo",sortable:!0,align:"right",format:(a,l)=>p.toCurrency(a),style:"width:15%"},{name:"abono",label:"abono",field:"abono",sortable:!0,align:"right",format:(a,l)=>p.toCurrency(a),style:"width:15%"},{name:"categoria",label:"Categoria",field:a=>{var l;return((l=a.categoria)==null?void 0:l.nombre)||"Pago del periodo"},sortable:!0,align:"left",style:"width:30%"},{name:"estado",label:"Estado",field:a=>{var l;return((l=a.estadoRegistroTarjeta)==null?void 0:l.nombre)||"Error"},sortable:!0,align:"left",style:"width:30%"},{name:"acciones",field:"action",sortable:!1,align:"center",headerStyle:"max-width:60px;width:60px;min-width:60px"}],Vt=[{name:"fecha",label:"Fecha",field:"fecha",sortable:!0,align:"left",format:(a,l)=>p.formatoFechaFromISO(a),style:"width: 10%"},{name:"concepto",label:"Concepto",field:a=>a.concepto,sortable:!0,align:"left",style:"width: 30%"},{name:"importe",label:"Importe Total",field:"importe",sortable:!0,align:"right",format:(a,l)=>p.toCurrencyAbsoluteFormat(a),style:"width:15%"},{name:"importeMensual",label:"Importe Mensual",field:"importeMensual",sortable:!0,align:"right",format:(a,l)=>p.toCurrency(a),style:"width:15%"},{name:"categoria",label:"Categoria",field:a=>a.categoria.nombre,sortable:!0,align:"left",style:"width:30%"},{name:"numeroMsi",label:"N\xFAmero de MSI",field:"numeroMsi",sortable:!0,align:"left",style:"width:10%"},{name:"acciones",field:"action",sortable:!1,align:"center",style:"width: 5%"}];function Mt(){console.log("actualizar saldo resumen")}return(a,l)=>(V(),X(et,null,[t(ie,{flat:"",class:"bg-main-background"},{default:s(()=>{var d,x;return[t(Re,{class:"text-primary",fit:"",dense:""},{default:s(()=>[e("div",_o,[e("div",po,[t(Nt,{class:"breadcrum-component"},{default:s(()=>[t($e,{icon:"home",label:"Home",to:"/"}),t($e,{label:"Tarjetas de cr\xE9dito",icon:"credit_card",to:"/tarjetas_credito"}),t($e,{label:r.value.nombre,icon:"account_balance_wallet"},null,8,["label"])]),_:1})])]),t(We),t(I,{color:"primary",icon:"las la-arrow-circle-left",onClick:l[0]||(l[0]=ne=>S(U).go(-1)),flat:"",rounded:"","no-caps":"",label:"Regresar"})]),_:1}),e("div",vo,[e("div",fo,[t(Ae,{class:"shadow-icon",src:`/icons/${(x=(d=r.value.banco)==null?void 0:d.icono)!=null?x:"cash.png"}`,width:"50px",height:"50px"},null,8,["src"]),e("span",go,m(r.value.nombre),1)]),ho])]}),_:1}),e("div",bo,[e("div",yo,[t(ie,{class:"my-card",flat:"",bordered:""},{default:s(()=>[t(Y,{class:"q-pa-xs",flat:"",dense:"",style:{border:"0px solid red"}},{default:s(()=>[t(Re,{class:"",style:{border:"0px solid green"}},{default:s(()=>[e("div",wo,[t(oa,{year:C.value,"onUpdate:year":l[1]||(l[1]=d=>C.value=d),month:b.value,"onUpdate:month":l[2]||(l[2]=d=>b.value=d),onOnChangePeriodo:xt},null,8,["year","month"]),t(L,{spaced:"",vertical:"",inset:""}),t(I,{color:"toolbar-button",label:"pagos",onClick:Tt,push:""})])]),_:1})]),_:1}),t(tt,{class:"resumen bg-white"},{default:s(()=>[H.value?(V(),W(Kt,{key:0,class:"q-pr-md text-primary text-subtitle1 text-bold"},{default:s(()=>[D(" RESUMEN: \xA0 ")]),_:1})):K("",!0),H.value?K("",!0):(V(),X("div",Co,[e("div",xo,[Io,e("span",jo,m(r.value.dia_corte),1)]),t(L,{spaced:"",vertical:""}),e("div",So,[To,e("span",$o,m(Pe.value)+" - "+m(De.value),1)]),t(L,{spaced:"",vertical:""}),e("div",Fo,[Ro,e("span",Eo,m(S(p).toCurrency(g.value===0?0:g.value*-1)),1)]),t(L,{spaced:"",vertical:""}),e("div",Ao,[qo,e("span",Oo,m(ke.value.toFormat("dd/MM/yyyy")),1)]),t(L,{spaced:"",vertical:""}),e("div",Vo,[Mo,e("span",No,m(S(p).toCurrency(B.value===0?0:B.value*-1)),1)]),t(L,{spaced:"",vertical:""}),e("div",Po,[Do,e("span",ko,m(S($)(r.value.saldo)),1)])])),t(ia),t(I,{class:"small-button",color:"primary",icon:"las la-redo-alt",onClick:Mt,flat:""}),t(I,{color:"grey",round:"",flat:"",dense:"",icon:H.value?"keyboard_arrow_up":"keyboard_arrow_down",onClick:l[3]||(l[3]=d=>H.value=!H.value)},null,8,["icon"])]),_:1}),t(Yt,null,{default:s(()=>[we(e("div",null,[t(Y,{class:"row tarjeta-resumen"},{default:s(()=>[e("div",Qo,[e("div",Uo,[e("div",Lo,[zo,e("span",Go,m(r.value.dia_corte),1)])]),e("div",Ho,[t(L,{spaced:"",vertical:""}),e("div",Bo,[Jo,e("span",Ko,m(Pe.value)+" - "+m(De.value),1)])]),e("div",Yo,[e("div",Wo,[Xo,e("span",Zo,m(S(p).toCurrency(Math.abs(g.value))),1)])]),e("div",es,[e("div",ts,[as,e("span",os,m(ke.value.toFormat("dd/MM/yyyy")),1)])])]),e("div",ss,[e("div",ls,[e("div",rs,[ns,e("span",is,m(S(p).toCurrency(B.value===0?0:B.value*-1)),1)])]),e("div",cs,[e("div",ds,[us,e("span",ms,m(S(p).toCurrency(_.value+y.value)),1)])]),e("div",_s,[e("div",ps,[vs,e("span",fs,m(S(p).toCurrency(Math.abs(ce.value))),1)])]),e("div",gs,[e("div",hs,[bs,e("span",ys,m(S(p).toCurrency(r.value.saldo===0?0:r.value.saldo*-1)),1)])])])]),_:1})],512),[[Ht,H.value]])]),_:1})]),_:1}),t(ie,{flat:""},{default:s(()=>[t(Y,null,{default:s(()=>[u.value.length>0?(V(),W(qe,{key:0,rows:u.value,columns:Vt,dense:"","rows-per-page-options":[0],"hide-pagination":"","table-header-class":"bg-primary-light text-accent text-condensed",separator:"horizontal"},{"top-left":s(()=>[t(ge,{class:""},{default:s(()=>[ws]),_:1})]),"top-right":s(()=>[e("div",Cs,[e("div",xs,[t(I,{color:"primary",icon:"add_circle",onClick:He,flat:"",rounded:""})])])]),"body-cell-acciones":s(d=>[t(O,{props:d},{default:s(()=>[t(I,{class:"button-edit",icon:"las la-edit",onClick:x=>ze(d),flat:"",dense:""},null,8,["onClick"]),t(I,{class:"button-delete",icon:"la la-trash-alt",onClick:x=>Ct(d),flat:"",dense:""},null,8,["onClick"])]),_:2},1032,["props"])]),"bottom-row":s(()=>[t(ge,{class:"text-bold bg-table-summary"},{default:s(()=>[t(O,{colspan:"2"},{default:s(()=>[D("Total meses sin intereses:")]),_:1}),t(O,{align:"right"},{default:s(()=>[D(m(S(p).toCurrencyAbsoluteFormat(y.value)),1)]),_:1}),t(O,{colspan:"4"})]),_:1})]),_:1},8,["rows"])):K("",!0),t(L,{spaced:"",inset:"",vertical:"",dark:""}),t(qe,{rows:N.value,columns:Ot,dense:"","rows-per-page-options":[0],"table-header-class":"bg-primary-light text-accent text-condensed",separator:"horizontal","pagination-label":At,selection:"multiple",selected:z.value,"onUpdate:selected":l[4]||(l[4]=d=>z.value=d),"row-key":"id"},{"top-left":s(()=>[t(ge,{class:"cuenta__data-subtitle"},{default:s(()=>[Is]),_:1})]),"top-right":s(()=>[e("div",js,[e("div",Ss,[t(I,{disable:z.value.length<=0,class:"medium-button","no-caps":"",color:"negative-pastel",label:"Eliminar",onClick:yt,push:"",icon:"las la-trash",rounded:""},null,8,["disable"]),t(I,{"no-caps":"",class:"medium-button",color:"primary-button",label:"Agregar",onClick:He,push:"",icon:"add_circle",rounded:""}),t(I,{color:"primary-button",flat:"",onClick:St,"no-caps":"",rounded:""},{default:s(()=>[t(Bt,{square:"",size:"24px"},{default:s(()=>[t(Ae,{src:"/icons/excel.png",width:"24px",height:"24px"})]),_:1}),Ts]),_:1})])])]),"body-cell-concepto":s(d=>[t(O,{key:"concepto",props:d},{default:s(()=>[D(m(d.row.concepto)+" ",1),t(sa,{modelValue:d.row.concepto,"onUpdate:modelValue":x=>d.row.concepto=x,title:"Editar concepto",buttons:"","label-set":"Guardar","label-cancel":"Cancelar",onSave:x=>qt(d),"max-width":"150px"},{default:s(x=>[t(Ee,{modelValue:x.value,"onUpdate:modelValue":ne=>x.value=ne,onKeyup:Jt(x.set,["enter"]),type:"text",label:"Favor de ingresar el concepto",autofocus:""},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"])]),"body-cell-acciones":s(d=>[t(O,{props:d,class:"q-gutter-x-sm"},{default:s(()=>[t(I,{class:"button-edit",icon:"las la-edit",onClick:x=>ze(d),flat:"",dense:""},null,8,["onClick"])]),_:2},1032,["props"])]),"bottom-row":s(()=>[t(ge,{class:"text-bold bg-table-summary"},{default:s(()=>[t(O,{colspan:"3"},{default:s(()=>[D(" Totales: ")]),_:1}),t(O,{align:"right"},{default:s(()=>[D(m(S(p).toCurrency(i.value)),1)]),_:1}),t(O,{align:"right"},{default:s(()=>[D(m(S(p).toCurrency(o.value)),1)]),_:1}),t(O,{colspan:"3"})]),_:1})]),_:1},8,["rows","selected"])]),_:1})]),_:1})])]),(V(),W(Gt,{to:"#modal"},[t(Fe,{modelValue:F.value,"onUpdate:modelValue":l[5]||(l[5]=d=>F.value=d),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:s(()=>[t(Ca,{"cuenta-id":r.value.id,"registro-edited-item":j.value,onRegistroCreated:$t,onRegistroUpdated:Ft,fecha:ut.value},null,8,["cuenta-id","registro-edited-item","fecha"])]),_:1},8,["modelValue"]),t(Fe,{modelValue:n.value,"onUpdate:modelValue":l[6]||(l[6]=d=>n.value=d),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:s(()=>[t(mo,{cuenta:r.value,onItemsSaved:Rt,fecha_desde:ve.value,fecha_hasta:J.value},null,8,["cuenta","fecha_desde","fecha_hasta"])]),_:1},8,["modelValue"]),t(Fe,{modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=d=>c.value=d),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:s(()=>[t(Va,{cuenta:r.value,"saldo-periodo-anterior":parseFloat(le.value),"suma-movimientos":parseFloat(_.value),fecha_inicio:ve.value,fecha_fin:J.value,onItemsSaved:Et},null,8,["cuenta","saldo-periodo-anterior","suma-movimientos","fecha_inicio","fecha_fin"])]),_:1},8,["modelValue"])])),e("pre",null,m(ve.value),1)],64))}};var el=Ze($s,[["__scopeId","data-v-315a1abe"]]);export{el as default};
