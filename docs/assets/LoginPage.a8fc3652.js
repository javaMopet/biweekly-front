import{l as q,i as _,ac as d,c as h,t as z,_ as S,g as N,ad as U,ae as $,af as F,f as R,r as B,I,P as x,k as L,ag as w,ah as v,ai as r,aj as o,ak as j,al as E,u as C,am as b,an as H,Q as f,ao as y,ap as Q,aq as V,z as K}from"./index.20d4ad85.js";import{Q as M}from"./QBtnToggle.bfaab28d.js";import{u as A,a as G,Q as O}from"./useNotificacion.79136029.js";import{Q as Y,a as T}from"./QLayout.da751566.js";import{u as D}from"./sessionStore.5294ed19.js";import"./QScrollObserver.a42daef1.js";import"./QResizeObserver.86d26826.js";var J=q({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(m,{slots:p}){const{proxy:{$q:n}}=N(),s=_(U,d);if(s===d)return console.error("QPage needs to be a deep child of QLayout"),d;if(_($,d)===d)return console.error("QPage needs to be child of QPageContainer"),d;const a=h(()=>{const l=(s.header.space===!0?s.header.size:0)+(s.footer.space===!0?s.footer.size:0);if(typeof m.styleFn=="function"){const c=s.isContainer.value===!0?s.containerHeight.value:n.screen.height;return m.styleFn(l,c)}return{minHeight:s.isContainer.value===!0?s.containerHeight.value-l+"px":n.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":n.screen.height-l+"px"}}),u=h(()=>`q-page${m.padding===!0?" q-layout-padding":""}`);return()=>z("main",{class:u.value,style:a.value},S(p.default))}});const W=V("div",{class:"row inline full-width justify-center text-h4 q-pt-lg text-accent-light"}," Iniciar Sesi\xF3n ",-1),X={class:"row justify-center"},le={__name:"LoginPage",setup(m){const p=A(),n=F(),s=D(),{mostrarNotificacionNegativa:i}=G(),a=R({name:"Horacio Pe\xF1a Mendoza",email:"hpenam@uaemex.mx",password:"Sv)c2%h$Kzw2][GYu0b",password_confirmation:"Sv)c2%h$Kzw2][GYu0b"}),u=B("one"),l=h(()=>u.value=="one"?"Entrar":"Registrar"),c=h(()=>u.value=="two");I(()=>{P()});function k(){if(c.value){const g={user:{name:a.name,email:a.email,password:a.password,password_confirmation:a.password_confirmation}};s.registerUser(g).then(({data:e})=>{console.log("data",e.status),e.status==="unprocessable_entity"?(console.log("data status",e.data.errors),e.data.errors.includes("Password confirmation doesn't match Password")&&i("No coincide al password de confirmaci\xF3n, favor de verificar."),e.data.errors.includes("Email has already been taken")&&i("El email ya se encuentra registrado"),e.data.errors.includes("Password is too short (minimum is 6 characters)")&&i("Password demasiado corto (m\xEDnimo 6 caracteres)")):n.push("/home")},e=>{console.log("Ocurri\xF3 un error al intentar registrar el usuario.",e),console.error(e)})}else{const g={user:{email:a.email,password:a.password}};s.loginUser(g).then(e=>{console.log("Resultado correcto",e),n.push("/home")},e=>{console.error("error",e),console.log(e),e.toString().includes("Request failed with status code 401")?i("Usuario y/o password incorrectos",2100):i("Ocurri\xF3 un error al intentar iniciar sesi\xF3n",2100)})}}function P(){x.remove("auth_token"),x.remove("user"),L.defaults.headers.common.Authorization=null}return(g,t)=>(w(),v(Y,null,{default:r(()=>[o(T,{class:""},{default:r(()=>[o(J,{class:"flex flex-center bg-color"},{default:r(()=>[o(j,{class:"bg-dark text-accent card-login",style:E(C(p).screen.lt.sm||C(p).screen.lt.md?{width:"80%"}:{width:"30%"})},{default:r(()=>[o(b,null,{default:r(()=>[W]),_:1}),o(b,{class:"q-pt-xl"},{default:r(()=>[o(M,{icon:"login",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),class:"my-custom-toggle",spread:"","toggle-color":"primary-button","toggle-text-color":"white","text-color":"grey-6",options:[{label:"Entrar",value:"one"},{label:"Registrar",value:"two"}],padding:"0.8rem",push:"",style:{border:"0px solid !important"}},null,8,["modelValue"])]),_:1}),o(b,{style:{border:"0px solid red"},align:"center"},{default:r(()=>[o(O,{onSubmit:H(k,["prevent"]),class:"q-gutter-md q-pa-lg",style:{"max-width":"350px",border:"0px solid yellow"},fit:""},{default:r(()=>[c.value?(w(),v(f,{key:0,modelValue:a.name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.name=e),"lazy-rules":"",type:"text",label:"Nombre Completo",dark:"",rules:[e=>!!e||"Nombre completo requerido"],outlined:""},{prepend:r(()=>[o(y,{name:"badge"})]),_:1},8,["modelValue","rules"])):Q("",!0),o(f,{modelValue:a.email,"onUpdate:modelValue":t[2]||(t[2]=e=>a.email=e),label:"Correo","input-class":"grey",class:"text-accent-light","label-color":"accent-light","lazy-rules":"",type:"email",dark:"",outlined:"",rules:[e=>!!e||"Correo es requerido"]},{prepend:r(()=>[o(y,{name:"mail"})]),_:1},8,["modelValue","rules"]),o(f,{type:"password",dark:"",modelValue:a.password,"onUpdate:modelValue":t[3]||(t[3]=e=>a.password=e),label:"Contrase\xF1a","input-class":"grey","label-color":"accent-light",class:"border-accent","lazy-rules":"",rules:[e=>!!e||"Contrase\xF1a es requerida"],outlined:""},{prepend:r(()=>[o(y,{name:"lock"})]),_:1},8,["modelValue","rules"]),c.value?(w(),v(f,{key:1,type:"password","input-class":"text-accent",modelValue:a.password_confirmation,"onUpdate:modelValue":t[4]||(t[4]=e=>a.password_confirmation=e),label:"Confirmar Contrase\xF1a","lazy-rules":"",dark:"",rules:[e=>!!e||"Contrase\xF1a es requerida"],outlined:""},{prepend:r(()=>[o(y,{name:"lock"})]),_:1},8,["modelValue","rules"])):Q("",!0),V("div",X,[o(K,{label:l.value,type:"submit",outline:"",color:"secondary",class:"text-bold"},null,8,["label"])])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1}))}};export{le as default};
